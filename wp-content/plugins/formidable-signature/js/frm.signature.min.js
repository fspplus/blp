/*
 BSD-3-CLAUSE
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,h,d){a instanceof String&&(a=String(a));for(var k=a.length,g=0;g<k;g++){var F=a[g];if(h.call(d,F,g,a))return{i:g,v:F}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,h,d){a!=Array.prototype&&a!=Object.prototype&&(a[h]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,h,d,k){if(h){d=$jscomp.global;a=a.split(".");for(k=0;k<a.length-1;k++){var g=a[k];g in d||(d[g]={});d=d[g]}a=a[a.length-1];k=d[a];h=h(k);h!=k&&null!=h&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:h})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6","es3");
(function(a){function h(d,k){function g(b,l){b.preventDefault();var e=a(b.target).offset();clearTimeout(t);t=!1;if("undefined"!==typeof b.targetTouches){var d=Math.floor(b.targetTouches[0].pageX-e.left);b=Math.floor(b.targetTouches[0].pageY-e.top)}else d=Math.floor(b.pageX-e.left),b=Math.floor(b.pageY-e.top);if(n.x===d&&n.y===b)return!0;null===n.x&&(n.x=d);null===n.y&&(n.y=b);l&&(b+=l);f.beginPath();f.moveTo(n.x,n.y);f.lineTo(d,b);f.lineCap=c.penCap;f.stroke();f.closePath();q.push({lx:d,ly:b,mx:n.x,
my:n.y});n.x=d;n.y=b;c.onDraw&&"function"===typeof c.onDraw&&c.onDraw.apply(u)}function h(){var b=a(c.output,e).val();if(""!==b&&void 0!==b&&(b=JSON.parse(b),!(1>b.length))){for(var l=0,d=b.length;l<d;l++)f.beginPath(),f.moveTo(b[l].mx,b[l].my),f.lineTo(b[l].lx,b[l].ly),f.lineCap=c.penCap,f.stroke(),f.closePath();q=b}}function r(){x()}function x(b){b?g(b,1):(z?p.each(function(){this.removeEventListener("touchmove",g)}):p.unbind("mousemove.signaturepad"),0<q.length&&c.onDrawEnd&&"function"===typeof c.onDrawEnd&&
c.onDrawEnd.apply(u));n.x=null;n.y=null;c.output&&0<q.length&&a(c.output,e).val(JSON.stringify(q))}function B(){G();a(c.output,e).val("");q=[];x()}function G(){f.clearRect(0,0,m.width,m.height);f.fillStyle=c.bgColour;f.fillRect(0,0,m.width,m.height);c.displayOnly||c.lineWidth&&(f.beginPath(),f.lineWidth=c.lineWidth,f.strokeStyle=c.lineColour,f.moveTo(c.lineMargin,c.lineTop),f.lineTo(m.width-c.lineMargin,c.lineTop),f.stroke(),f.closePath());f.lineWidth=c.penWidth;f.strokeStyle=c.penColour}function H(b,
a){null==n.x?g(b,1):g(b,a)}function I(b,a){z?a.addEventListener("touchmove",H,!1):p.bind("mousemove.signaturepad",H);g(b,1)}function N(){C=!1;p.each(function(){this.removeEventListener&&(this.removeEventListener("touchend",r),this.removeEventListener("touchcancel",r),this.removeEventListener("touchmove",g));this.ontouchstart&&(this.ontouchstart=null)});a(document).unbind("mouseup.signaturepad");p.unbind("mousedown.signaturepad");p.unbind("mousemove.signaturepad");p.unbind("mouseleave.signaturepad");
a(c.clear,e).unbind("click.signaturepad")}function J(b){if(C)return!1;C=!0;a("input").blur();"undefined"!==typeof b.targetTouches&&(z=!0);z?(p.each(function(){this.addEventListener("touchend",r,!1);this.addEventListener("touchcancel",r,!1)}),p.unbind("mousedown.signaturepad")):(a(document).bind("mouseup.signaturepad",function(){w&&(x(),clearTimeout(t),w=t=!1)}),p.bind("mouseleave.signaturepad",function(b){w&&x(b);w&&!t&&(t=setTimeout(function(){x();clearTimeout(t);w=t=!1},500))}),p.each(function(){this.ontouchstart=
null}))}function D(){a(c.typed,e).hide();G();p.each(function(){this.ontouchstart=function(b){b.preventDefault();w=!0;J(b);I(b,this)}});p.bind("mousedown.signaturepad",function(b){b.preventDefault();if(1<b.which)return!1;w=!0;J(b);I(b)});a(c.clear,e).bind("click.signaturepad",function(b){b.preventDefault();B()});a(c.typeIt,e).bind("click.signaturepad",function(b){b.preventDefault();K()});a(c.drawIt,e).unbind("click.signaturepad");a(c.drawIt,e).bind("click.signaturepad",function(b){b.preventDefault()});
a(c.typeIt,e).removeClass(c.currentClass);a(c.drawIt,e).addClass(c.currentClass);a(c.sig,e).addClass(c.currentClass);a(c.typeItDesc,e).hide();a(c.drawItDesc,e).show();a(c.clear,e).show()}function K(){B();N();a(c.typed,e).show();a(c.drawIt,e).bind("click.signaturepad",function(b){b.preventDefault();D()});a(c.typeIt,e).unbind("click.signaturepad");a(c.typeIt,e).bind("click.signaturepad",function(b){b.preventDefault()});a(c.output,e).val("");a(c.drawIt,e).removeClass(c.currentClass);a(c.typeIt,e).addClass(c.currentClass);
a(c.sig,e).removeClass(c.currentClass);a(c.drawItDesc,e).hide();a(c.clear,e).hide();a(c.typeItDesc,e).show();v=y=a(c.typed,e).css("font-size").replace(/px/,"")}function L(b){var l=a(c.typed,e);b=a.trim(b.replace(/>/g,"&gt;").replace(/</g,"&lt;"));var d=A,f=.5*v;A=b.length;l.html(b);if(b){if(A>d&&l.outerWidth()>m.width)for(;l.outerWidth()>m.width;)v--,l.css("font-size",v+"px");if(A<d&&l.outerWidth()+f<m.width&&v<y)for(;l.outerWidth()+f<m.width&&v<y;)v++,l.css("font-size",v+"px")}else l.css("font-size",
y+"px")}function O(b,c){a("p."+c.errorClass,b).remove();b.removeClass(c.errorClass);a("input, label",b).removeClass(c.errorClass)}function P(b,c,d){b.nameInvalid&&(c.prepend(['<p class="',d.errorClass,'">',d.errorMessage,"</p>"].join("")),a(d.name,c).focus(),a(d.name,c).addClass(d.errorClass),a("label[for="+a(d.name).attr("id")+"]",c).addClass(d.errorClass));b.drawInvalid&&c.prepend(['<p class="',d.errorClass,'">',d.errorMessageDraw,"</p>"].join(""))}function E(){var b=!0,d={drawInvalid:!1,nameInvalid:!1},
f=[e,c],g=[d,e,c];c.onBeforeValidate&&"function"===typeof c.onBeforeValidate?c.onBeforeValidate.apply(u,f):O.apply(u,f);c.drawOnly&&1>q.length&&(d.drawInvalid=!0,b=!1);""===a(c.name,e).val()&&(d.nameInvalid=!0,b=!1);c.onFormError&&"function"===typeof c.onFormError?c.onFormError.apply(u,g):P.apply(u,g);return b}function M(b,a,d){for(var e in b)"object"===typeof b[e]&&(a.beginPath(),a.moveTo(b[e].mx,b[e].my),a.lineTo(b[e].lx,b[e].ly),a.lineCap=c.penCap,a.stroke(),a.closePath(),d&&q.push({lx:b[e].lx,
ly:b[e].ly,mx:b[e].mx,my:b[e].my}))}function Q(){4.1>parseFloat((/CPU.+OS ([0-9_]{3}).*AppleWebkit.*Mobile/i.exec(navigator.userAgent)||[0,"4_2"])[1].replace("_","."))&&(a.fn.Oldoffset=a.fn.offset,a.fn.offset=function(){var b=a(this).Oldoffset();b.top-=window.scrollY;b.left-=window.scrollX;return b});a(c.typed,e).bind("selectstart.signaturepad",function(b){return a(b.target).is(":input")});p.bind("selectstart.signaturepad",function(b){return a(b.target).is(":input")});!m.getContext&&FlashCanvas&&
FlashCanvas.initElement(m);m.getContext&&(f=m.getContext("2d"),a(c.sig,e).show(),c.displayOnly||(c.drawOnly||(a(c.name,e).bind("keyup.signaturepad",function(){L(a(this).val())}),a(c.name,e).bind("blur.signaturepad",function(){L(a(this).val())}),a(c.drawIt,e).bind("click.signaturepad",function(a){a.preventDefault();D()})),c.drawOnly||"drawIt"===c.defaultAction?(D(),h()):K(),c.validateFields&&(a(d).is("form")?a(d).bind("submit.signaturepad",function(){return E()}):a(d).parents("form").bind("submit.signaturepad",
function(){return E()})),a(c.sigNav,e).css("display","block")))}var u=this,c=a.extend({},a.fn.signaturePad.defaults,k),e=a(d),p=a(c.canvas,e),m=p.get(0),f=null,n={x:null,y:null},q=[],t=!1,w=!1,z=!1,C=!1,y=30,v=y,A=0;a.extend(u,{signaturePad:"{{version}}",init:function(){Q()},updateOptions:function(b){a.extend(c,b)},regenerate:function(b){u.clearCanvas();a(c.typed,e).hide();"string"===typeof b&&(b=JSON.parse(b));M(b,f,!0);c.output&&0<a(c.output,e).length&&a(c.output,e).val(JSON.stringify(q))},clearCanvas:function(){B()},
getSignature:function(){return q},getSignatureString:function(){return JSON.stringify(q)},getSignatureImage:function(){var a=document.createElement("canvas");a.style.position="absolute";a.style.top="-999em";a.width=m.width;a.height=m.height;document.body.appendChild(a);!a.getContext&&FlashCanvas&&FlashCanvas.initElement(a);var d=a.getContext("2d");d.fillStyle=c.bgColour;d.fillRect(0,0,m.width,m.height);d.lineWidth=c.penWidth;d.strokeStyle=c.penColour;M(q,d);d=a.toDataURL.apply(a,arguments);document.body.removeChild(a);
return d},validateForm:function(){return E()}})}a.fn.signaturePad=function(d){var k=null;this.each(function(){a.data(this,"plugin-signaturePad")?(k=a.data(this,"plugin-signaturePad"),k.updateOptions(d)):(k=new h(this,d),k.init(),a.data(this,"plugin-signaturePad",k))});return k};a.fn.signaturePad.defaults={defaultAction:"typeIt",displayOnly:!1,drawOnly:!1,canvas:"canvas",sig:".sig",sigNav:".sigNav",bgColour:"#ffffff",penColour:"#145394",penWidth:2,penCap:"round",lineColour:"#ccc",lineWidth:2,lineMargin:5,
lineTop:35,name:".name",typed:".typed",clear:".clearButton",typeIt:".typeIt a",drawIt:".drawIt a",typeItDesc:".typeItDesc",drawItDesc:".drawItDesc",output:".output",currentClass:"current",validateFields:!0,errorClass:"error",errorMessage:"Please enter your name",errorMessageDraw:"Please sign the document",onBeforeValidate:null,onFormError:null,onDraw:null,onDrawEnd:null}})(jQuery);
function frmSignatureJS(){function a(){if("undefined"!=typeof __FRMSIG)for(var a=__FRMSIG,k=0,g=a.length;k<g;k++)h(a[k])}function h(a){var d={name:!1,bgColour:"transparent",penColour:a.text_color,penWidth:1.5,lineColour:a.line_color,lineWidth:a.line_width,lineMargin:a.line_margin,lineTop:a.line_top,defaultAction:a.default_tab,validateFields:!1,onDrawEnd:function(){setTimeout(function(){jQuery(".form-field").removeClass("frm_blank_field has-error");jQuery(".form-field .frm_error").replaceWith("");
jQuery(".frm_error_style").remove();frmFrontForm.validateFormSubmit(document.getElementById(".frm_field_"+a.id+"_container").querySelector("form"))},0)}},g=a.width,h=jQuery(".frm_field_"+a.id+"_container:not(.frm_signature), #frm_field_"+a.id+"_container");if(!(1>h.length)){var r=h.find(".sigPad");r.is(":visible")&&(g=r.width());0<g<parseInt(a.width)&&(r.attr("style","max-width:"+g+"px !important;"),h.find(".typed input").attr("style","max-width:"+(g-11)+"px !important;"),r.find("canvas").attr("width",
g-4),h.find('input[name$="[width]"]').val(g-4));h.addClass("frm_signature");r.signaturePad(d)}}return{init:function(){jQuery(".sigWrapper .typed").click(function(){jQuery(this).find("input").focus()});a();jQuery(document).on("frmPageChanged",a);jQuery(document).on("frmAfterAddRow",a);jQuery(document).on("frmFormComplete",a)}}}var frmSignature=frmSignatureJS();jQuery(document).ready(function(){frmSignature.init()});
